<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="es-ES">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="es-ES">
<![endif]-->
<!--[if !(IE 7) | !(IE 8) ]><!-->
<html lang="es-ES">
<!--<![endif]-->
<head>
<base href="http://www.osukaru.es" />

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Transformaciones XSL en Symfony | El lado Osukaru</title>
	
	
	<!--[if lt IE 9]>
	<script src="http://www.osukaru.es/wp-content/themes/twentyfourteen/js/html5.js"></script>
	<![endif]-->
	


<link rel='stylesheet' id='twentyfourteen-lato-css'  href='//fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='http://www.osukaru.es/wp-content/themes/twentyfourteen/genericons/genericons.css?ver=3.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfourteen-style-css'  href='http://www.osukaru.es/wp-content/themes/twentyfourteen/style.css?ver=3.8.1' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfourteen-ie-css'  href='http://www.osukaru.es/wp-content/themes/twentyfourteen/css/ie.css?ver=20131205' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='http://www.osukaru.es/wp-includes/js/comment-reply.min.js?ver=3.8.1'></script>
<script type='text/javascript' src='http://www.osukaru.es/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script>
<script type='text/javascript' src='http://www.osukaru.es/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>

 

<link rel='next' title='Creando un plugin para Symfony' href='http://www.osukaru.es/programacion/creando-un-plugin-para-symfony/' />

<link rel='canonical' href='http://www.osukaru.es/programacion/transformaciones-xsl-en-symfony/' />
<link rel='shortlink' href='http://www.osukaru.es/?p=102' />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="single single-post postid-102 single-format-standard masthead-fixed full-width singular">
<div id="page" class="hfeed site">
	
	<header id="masthead" class="site-header" role="banner">
		<div class="header-main">
			<h1 class="site-title"><a href="http://www.osukaru.es/" rel="home">El lado Osukaru</a></h1>

			<div class="search-toggle">
				<a href="#search-container" class="screen-reader-text">Buscar</a>
			</div>

			<nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation">
				<h1 class="menu-toggle">Menú principal</h1>
				<a class="screen-reader-text skip-link" href="#content">Ir al contenido</a>
				<div class="nav-menu"><ul><li class="page_item page-item-5"><a href="http://www.osukaru.es/acerca-de/">Mi perfil</a></li><li class="page_item page-item-2"><a href="http://www.osukaru.es/pagina-ejemplo/">Página de ejemplo</a></li></ul></div>
			</nav>
		</div>

		<div id="search-container" class="search-box-wrapper hide">
			<div class="search-box">
				<form role="search" method="get" class="search-form" action="http://www.osukaru.es/">
				<label>
					<span class="screen-reader-text">Buscar:</span>
					<input type="search" class="search-field" placeholder="Buscar &hellip;" value="" name="s" title="Buscar:" />
				</label>
				<input type="submit" class="search-submit" value="Buscar" />
			</form>			</div>
		</div>
	</header><!-- #masthead -->

	<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">
			
<article id="post-102" class="post-102 post type-post status-publish format-standard hentry category-programacion tag-symfony tag-xsl">
	
	<header class="entry-header">
				<div class="entry-meta">
			<span class="cat-links"><a href="http://www.osukaru.es/category/programacion/" title="Ver todas las entradas en Programación" rel="category tag">Programación</a></span>
		</div>
		<h1 class="entry-title">Transformaciones XSL en Symfony</h1>
		<div class="entry-meta">
			<span class="entry-date"><a href="http://www.osukaru.es/programacion/transformaciones-xsl-en-symfony/" rel="bookmark"><time class="entry-date" datetime="2010-04-02T16:58:32+00:00">2 abril, 2010</time></a></span> <span class="byline"><span class="author vcard"><a class="url fn n" href="http://www.osukaru.es/author/osukaru/" rel="author">Osukaru</a></span></span>			<span class="comments-link"><a href="http://www.osukaru.es/programacion/transformaciones-xsl-en-symfony/#respond" title="Comentarios en Transformaciones XSL en Symfony">Dejar un comentario</a></span>
					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>Ya hemos visto cómo realizar transformaciones XSL con PHP 5, pero ¿cómo aplicamos esto en Symfony?</p>
<p>Lo que podemos hacer es que las vistas generen XML y después en el layout transformamos este XML en XHTML mediante nuestra hoja de estilos XSL.<br />
<span id="more-102"></span></p>
<p>Vamos a utilizar el mismo ejemplo que en el post anterior. Lo primero que haremos es crear una carpeta 	<em>xsl</em> dentro del directorio <em>web</em>. Ahora metemos ahí los archivos de ejemplo (collection.xsl y collection.xml). En el layout, en el lugar que queramos (total, es sólo para probar) incrustamos el código de ejemplo:<br />
[php]<br />
<?php<br />
   $xslDoc = new DOMDocument();<br />
   $xslDoc->load(&#8220;xsl/collection.xsl&#8221;);</p>
<p>   $xmlDoc = new DOMDocument();<br />
   $xmlDoc->load(&#8220;xsl/collection.xml&#8221;);</p>
<p>   $proc = new XSLTProcessor();<br />
   $proc->importStylesheet($xslDoc);<br />
   echo $proc->transformToXML($xmlDoc);<br />
?><br />
[/php]<br />
Si ahora ejecutamos nuestro proyecto veremos que la transformación se realiza correctamente. Pero esto no es lo que queríamos, ya que estamos cargando el XML de ejemplo directamente desde un archivo y lo que queremos es cogerlo de una vista. Bien, creemos entonces un nuevo módulo y en el <em>indexSuccess.php</em> metamos el XML de ejemplo. Ahora sólo tenemos que cambiar el código de ejemplo del layout y utilizar la función <em>loadXML</em> y la variable <em>$sf_content</em>:<br />
[php]<br />
<?php<br />
   $xslDoc = new DOMDocument();<br />
   $xslDoc->load(&#8220;xsl/collection.xsl&#8221;);</p>
<p>   $xmlDoc = new DOMDocument();<br />
   $xmlDoc->loadXML($sf_content);</p>
<p>   $proc = new XSLTProcessor();<br />
   $proc->importStylesheet($xslDoc);<br />
   echo $proc->transformToXML($xmlDoc);<br />
?><br />
[/php]<br />
Con esto ya hemos conseguido lo que queríamos, aunque es un poco engorroso poner todo ese trozo de código en el layout, así que podemos crear un helper que nos ayude a simplificar la tarea. Para ello, dentro de la carpeta <em>lib</em> (por ejemplo, dentro de la aplicación <em>frontend</em>) creamos un nuevo directorio <em>helper</em> y dentro de él nuestro helper <em>XSLHelper.php</em> que contendrá el siguiente código:<br />
[php]<br />
<?php<br />
function XSLTransform($xmlString)<br />
{<br />
    $xslDoc = new DOMDocument();<br />
    $xslDoc->load(&#8220;xsl/collection.xsl&#8221;);</p>
<p>    $xmlDoc = new DOMDocument();<br />
    $xmlDoc->loadXML($xmlString);</p>
<p>    $proc = new XSLTProcessor();<br />
    $proc->importStylesheet($xslDoc);</p>
<p>    return $proc->transformToXML($xmlDoc);<br />
}<br />
?><br />
[/php]<br />
Ahora en nuestro <em>layout</em> sólo tenemos que poner el siguiente código:<br />
[php]<br />
<?php<br />
    <?php use_helper('XSL') ?><br />
    <?php echo XSLTransform($sf_content) ?><br />
?><br />
[/php]<br />
Y si queremos simplificar aún más, podemos hacer que nuestro nuevo helper se cargue por defecto y así no tener que incluirlo manualmente. Para ello, en el archivo <em>settings.yml</em> dentro de la carpeta <em>config</em> de nuestra aplicación <em>frontend</em> lo incluimos en una lista de helpers por defecto:<br />
[css]<br />
all:<br />
  .settings:<br />
    standard_helpers: [XSL]<br />
[/css]<br />
Así, en nuestro layout ya sólo tendremos que escribir:<br />
[php]<br />
<?php<br />
    <?php echo XSLTransform($sf_content) ?><br />
?><br />
[/php]<br />
Bien, ahora sólo nos quedaría solucionar un pequeño problema de la forma más elegante que se nos ocurra, y es que la hoja de estilos XSL con la que realizaremos las transformaciones la hemos puesto directamente en la función de nuestro helper. Podríamos incluir un nuevo parámetro en nuestra función para especificar la hoja de estilos, pero esto no sería muy ágil si hacemos muchas llamadas al helper y en un futuro cambiamos de nombre o de ruta la hoja de estilos, así que lo mejor sería que pudiésemos obtener este dato de un archivo de configuración, por ejemplo del <em>settings.yml</em>. Lo que tenemos que hacer es definir una constante en ese archivo:<br />
[css]<br />
all:<br />
  xsl_doc:    xsl/collection.xsl<br />
[/css]<br />
Y después utilizar la clase sfConfig de Symfony para recuperar el valor en nuestro helper:<br />
[php]<br />
<?php<br />
function XSLTransform($xmlString)<br />
{<br />
    $xslDoc = new DOMDocument();<br />
    $xslDoc->load(sfConfig::get(&#8216;sf_xsl_doc&#8217;));</p>
<p>    $xmlDoc = new DOMDocument();<br />
    $xmlDoc->loadXML($xmlString);</p>
<p>    $proc = new XSLTProcessor();<br />
    $proc->importStylesheet($xslDoc);</p>
<p>    return $proc->transformToXML($xmlDoc);<br />
}<br />
?><br />
[/php] </p>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta"><span class="tag-links"><a href="http://www.osukaru.es/tag/symfony/" rel="tag">Symfony</a><a href="http://www.osukaru.es/tag/xsl/" rel="tag">XSL</a></span></footer></article><!-- #post-## -->
	<nav class="navigation post-navigation" role="navigation">
		<h1 class="screen-reader-text">Ir a la entrada</h1>
		<div class="nav-links">
			<a href="http://www.osukaru.es/programacion/transformaciones-xsl-desde-php-5/" rel="prev"><span class="meta-nav">Entrada anterior</span>Transformaciones XSL desde PHP 5</a><a href="http://www.osukaru.es/programacion/creando-un-plugin-para-symfony/" rel="next"><span class="meta-nav">Entrada siguiente</span>Creando un plugin para Symfony</a>		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
	
<div id="comments" class="comments-area">

	
									<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Deja un comentario <small><a rel="nofollow" id="cancel-comment-reply-link" href="/programacion/transformaciones-xsl-en-symfony/#respond" style="display:none;">Cancelar respuesta</a></small></h3>
									<form action="http://www.osukaru.es/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
																			<p class="comment-notes">Tu dirección de correo electrónico no será publicada. Los campos necesarios están marcados <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Nombre <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Correo electrónico <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Web</label> <input id="url" name="url" type="url" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comentario</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">Puedes usar las siguientes etiquetas y atributos <abbr title="HyperText Markup Language">HTML</abbr>:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Publicar comentario" />
							<input type='hidden' name='comment_post_ID' value='102' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
											</form>
							</div><!-- #respond -->
			
</div><!-- #comments -->
		</div><!-- #content -->
	</div><!-- #primary -->

<div id="secondary">
		<h2 class="site-description">Otro sitio realizado con WordPress</h2>
	
	
		<div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary">
		<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="http://www.osukaru.es/">
				<label>
					<span class="screen-reader-text">Buscar:</span>
					<input type="search" class="search-field" placeholder="Buscar &hellip;" value="" name="s" title="Buscar:" />
				</label>
				<input type="submit" class="search-submit" value="Buscar" />
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h1 class="widget-title">Entradas recientes</h1>		<ul>
					<li>
				<a href="http://www.osukaru.es/programacion/websocket-pull-api-de-ducksboard/">WebSocket Pull API de Ducksboard</a>
						</li>
					<li>
				<a href="http://www.osukaru.es/programacion/primer-hackathon-opensource-betabeers/">Primer Hackathon Opensource Betabeers</a>
						</li>
					<li>
				<a href="http://www.osukaru.es/programacion/generar-documentacion-de-symfony2/">Generar documentación de Symfony2</a>
						</li>
					<li>
				<a href="http://www.osukaru.es/programacion/symfony2-ya-esta-aqui/">Symfony2 ya está aquí</a>
						</li>
					<li>
				<a href="http://www.osukaru.es/programacion/preparandonos-para-la-llegada-de-symfony2/">Preparandonos para la llegada de Symfony2</a>
						</li>
				</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h1 class="widget-title">Comentarios recientes</h1><ul id="recentcomments"><li class="recentcomments"><a href='http://howtoloseweightfasteasytips.com/' rel='external nofollow' class='url'>how to lose weight fast</a> en <a href="http://www.osukaru.es/programacion/primer-hackathon-opensource-betabeers/#comment-150">Primer Hackathon Opensource Betabeers</a></li><li class="recentcomments"><a href='http://buyhometoolshere.tk/' rel='external nofollow' class='url'>this site</a> en <a href="http://www.osukaru.es/programacion/primer-hackathon-opensource-betabeers/#comment-149">Primer Hackathon Opensource Betabeers</a></li><li class="recentcomments"><a href='http://npsanjal.com/palden-and-khyatis-impressive-aerial-act/' rel='external nofollow' class='url'>npsanjal.com</a> en <a href="http://www.osukaru.es/programacion/configuracion-de-apache-para-un-proyecto-symfony/#comment-37">Configuración de Apache para un proyecto Symfony</a></li><li class="recentcomments"><a href='http://livesexcamonline.yolasite.com/' rel='external nofollow' class='url'>Bridgeford</a> en <a href="http://www.osukaru.es/programacion/configuracion-de-apache-para-un-proyecto-symfony/#comment-36">Configuración de Apache para un proyecto Symfony</a></li><li class="recentcomments"><a href='http://www.downloadyoutubevideosnow.com' rel='external nofollow' class='url'>download youtube videos</a> en <a href="http://www.osukaru.es/programacion/creando-un-plugin-para-symfony/#comment-66">Creando un plugin para Symfony</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h1 class="widget-title">Archivos</h1>		<ul>
			<li><a href='http://www.osukaru.es/2012/08/'>agosto 2012</a></li>
	<li><a href='http://www.osukaru.es/2012/04/'>abril 2012</a></li>
	<li><a href='http://www.osukaru.es/2011/05/'>mayo 2011</a></li>
	<li><a href='http://www.osukaru.es/2011/03/'>marzo 2011</a></li>
	<li><a href='http://www.osukaru.es/2011/02/'>febrero 2011</a></li>
	<li><a href='http://www.osukaru.es/2010/12/'>diciembre 2010</a></li>
	<li><a href='http://www.osukaru.es/2010/07/'>julio 2010</a></li>
	<li><a href='http://www.osukaru.es/2010/06/'>junio 2010</a></li>
	<li><a href='http://www.osukaru.es/2010/05/'>mayo 2010</a></li>
	<li><a href='http://www.osukaru.es/2010/04/'>abril 2010</a></li>
	<li><a href='http://www.osukaru.es/2010/02/'>febrero 2010</a></li>
	<li><a href='http://www.osukaru.es/2010/01/'>enero 2010</a></li>
	<li><a href='http://www.osukaru.es/2009/12/'>diciembre 2009</a></li>
	<li><a href='http://www.osukaru.es/2009/11/'>noviembre 2009</a></li>
		</ul>
</aside><aside id="categories-2" class="widget widget_categories"><h1 class="widget-title">Categorías</h1>		<ul>
	<li class="cat-item cat-item-2"><a href="http://www.osukaru.es/category/programacion/" title="Ver todas las entradas archivadas en Programación">Programación</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://www.osukaru.es/category/tecnologia/" title="Ver todas las entradas archivadas en Tecnología">Tecnología</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h1 class="widget-title">Meta</h1>			<ul>
						<li><a href="http://www.osukaru.es/wp-login.php">Acceder</a></li>
			<li><a href="http://www.osukaru.es/feed/" title="Suscribirse a este sitio usando RSS 2.0"><abbr title="Really Simple Syndication">RSS</abbr> de las entradas</a></li>
			<li><a href="http://www.osukaru.es/comments/feed/" title="Últimos comentarios a todas las entradas en RSS"><abbr title="Really Simple Syndication">RSS</abbr> de los comentarios</a></li>
			<li><a href="http://es.wordpress.org/" title="Gestionado con WordPress, una avanzada plataforma semántica de publicación personal.">WordPress.org</a></li>						</ul>
</aside>	</div><!-- #primary-sidebar -->
	</div><!-- #secondary -->

		</div><!-- #main -->

		<footer id="colophon" class="site-footer" role="contentinfo">

			
			<div class="site-info">
								<a href="http://es.wordpress.org/">Creado con WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	<script type='text/javascript' src='http://www.osukaru.es/wp-content/themes/twentyfourteen/js/functions.js?ver=20131209'></script>
</body>
</html>