

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Controlador &mdash; symfony-docs-es v1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="symfony-docs-es v1 documentation" href="../index.html" />
    <link rel="up" title="Libro" href="index.html" />
    <link rel="next" title="Enrutando" href="routing.html" />
    <link rel="prev" title="Creando páginas en Symfony2" href="page_creation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="routing.html" title="Enrutando"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="page_creation.html" title="Creando páginas en Symfony2"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">symfony-docs-es v1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Libro</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="controlador">
<span id="index-0"></span><h1>Controlador<a class="headerlink" href="#controlador" title="Permalink to this headline">¶</a></h1>
<p>Un controlador es una función PHP que tú creas, misma que toma información de la petición HTTP y construye una respuesta HTTP y la devuelve (como un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> de Symfony2). La respuesta podría ser una página HTML, un documento XML, una matriz JSON serializada, una imagen, una redirección, un error 404 o cualquier otra cosa que se te ocurra. El controlador contiene toda la lógica arbitraria que <em>tu aplicación necesita</em> para reproducir el contenido de la página.</p>
<p>Para ver lo sencillo que es esto, echemos un vistazo a un controlador de Symfony2 en acción.
El siguiente controlador reproducirá una página que simplemente imprime <tt class="docutils literal"><span class="pre">¡Hola,</span> <span class="pre">mundo!</span></tt>:</p>
<div class="highlight-python"><pre>use Symfony\Component\HttpFoundation\Response;

public function holaAction()
{
    return new Response('¡Hola mundo!');
}</pre>
</div>
<p>El objetivo de un controlador siempre es el mismo: crear y devolver un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>. Por el camino, este puede leer la información de la petición, cargar un recurso de base de datos, enviar un correo electrónico, o fijar información en la sesión del usuario.
Pero en todos los casos, el controlador eventualmente devuelve el objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> que será entregado al cliente.</p>
<p>¡No hay magia y ningún otro requisito del cual preocuparse! Aquí tienes unos cuantos ejemplos comunes:</p>
<ul class="simple">
<li><em>Controlador A</em> prepara un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> que reproduce el contenido de la página principal del sitio.</li>
<li><em>Controlador B</em> lee el parámetro <tt class="docutils literal"><span class="pre">ficha</span></tt> de la petición para cargar una entrada del blog de la base de datos y crear un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> mostrando ese blog. Si la <tt class="docutils literal"><span class="pre">ficha</span></tt> no se puede encontrar en la base de datos, crea y devuelve un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> con un código de estado 404.</li>
<li><em>Controlador C</em> procesa la información presentada en un formulario de contacto. Este lee la información del formulario desde la petición, guarda la información del contacto en la base de datos y envía mensajes de correo electrónico con la información de contacto al administrador del sitio web. Por último, crea un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> que redirige el navegador del cliente desde el formulario de contacto a la página de <em>&#8220;agradecimiento&#8221;</em>.</li>
</ul>
<div class="section" id="ciclo-de-vida-de-la-peticion-controlador-respuesta">
<span id="index-1"></span><h2>Ciclo de vida de la petición, controlador, respuesta<a class="headerlink" href="#ciclo-de-vida-de-la-peticion-controlador-respuesta" title="Permalink to this headline">¶</a></h2>
<p>Cada petición manejada por un proyecto Symfony2 pasa por el mismo ciclo de vida básico.
La plataforma se encarga de las tareas repetitivas y, finalmente, ejecuta el controlador, que contiene el código personalizado de tu aplicación:</p>
<ol class="arabic simple">
<li>Cada petición es manejada por un único archivo controlador frontal (por ejemplo, <tt class="docutils literal"><span class="pre">app.php</span></tt> o <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>) el caul es responsable de arrancar la aplicación;</li>
<li>El <tt class="docutils literal"><span class="pre">Enrutador</span></tt> lee la información de la petición (por ejemplo, la URI), encuentra una ruta que coincida con esa información, y lee el parámetro <tt class="docutils literal"><span class="pre">_controller</span></tt> de la ruta;</li>
<li>El controlador de la ruta encontrada es ejecutado y el código dentro del controlador crea y devuelve un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>;</li>
<li>Las cabeceras HTTP y el contenido del objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> se envían de vuelta al cliente.</li>
</ol>
<p>La creación de una página es tan fácil como crear un controlador (#3) y hacer una ruta que vincula una URI con ese controlador (#2).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Aunque nombrados de manera similar, un &#8220;controlador frontal&#8221; es diferente de los &#8220;controladores&#8221; vamos a hablar acerca de eso en este capítulo. Un controlador frontal es un breve archivo PHP que vive en tu directorio web raíz y a través del cual se dirigen todas las peticiones. Una aplicación típica tendrá un controlador frontal de producción (por ejemplo, <tt class="docutils literal"><span class="pre">app.php</span></tt>) y un controlador frontal de desarrollo (por ejemplo, <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>). Probablemente nunca necesites editar, ver o preocuparte por los controladores frontales en tu aplicación.</p>
</div>
</div>
<div class="section" id="un-controlador-sencillo">
<span id="index-2"></span><h2>Un controlador sencillo<a class="headerlink" href="#un-controlador-sencillo" title="Permalink to this headline">¶</a></h2>
<p>Mientras que un controlador puede ser cualquier cosa PHP ejecutable (una función, un método en un objeto o un <tt class="docutils literal"><span class="pre">Cierre</span></tt>), en Symfony2, un controlador suele ser un único método dentro de un objeto controlador. Los controladores también se conocen como <em>acciones</em>.</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="x">// src/Acme/HolaBundle/Controller/HolaController.php</span>

<span class="x">namespace Acme\HolaBundle\Controller;</span>
<span class="x">use Symfony\Component\HttpFoundation\Response;</span>

<span class="x">class HolaController</span>
<span class="x">{</span>
<span class="x">    public function indexAction($nombre)</span>
<span class="x">    {</span>
<span class="x">      return new Response(&#39;&lt;html&gt;&lt;body&gt;Hola &#39;.$nombre.&#39;!&lt;/body&gt;&lt;/html&gt;&#39;);</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Ten en cuenta que el <em>controlador</em> es el método <tt class="docutils literal"><span class="pre">indexAction</span></tt>, que vive dentro de una <em>clase controlador</em> (<tt class="docutils literal"><span class="pre">HolaController</span></tt>). No te dejes confundir por la nomenclatura: una <em>clase controlador</em> simplemente es una conveniente forma de agrupar varios controladores/acciones. Generalmente, la clase controlador albergará varios controladores (por ejemplo, <tt class="docutils literal"><span class="pre">updateAction</span></tt>, <tt class="docutils literal"><span class="pre">deleteAction</span></tt>, etc.).</p>
</div>
<p>Este controlador es bastante sencillo, pero vamos a revisarlo línea por línea:</p>
<ul class="simple">
<li>En la <em>línea 3</em>: Symfony2 toma ventaja de la funcionalidad del espacio de nombres de PHP 5.3 para el espacio de nombres de la clase del controlador completa. La palabra clave <tt class="docutils literal"><span class="pre">use</span></tt> importa la clase <tt class="docutils literal"><span class="pre">Respuesta</span></tt>, misma que nuestro controlador debe devolver.</li>
<li>En la <em>línea 6</em>: el nombre de clase es la concatenación del nombre de la clase controlador (es decir <tt class="docutils literal"><span class="pre">Hola</span></tt>) y la palabra <tt class="docutils literal"><span class="pre">Controller</span></tt>. Esta es una convención que proporciona consistencia a los controladores y permite hacer referencia sólo a la primera parte del nombre (es decir, <tt class="docutils literal"><span class="pre">Hola</span></tt>) en la configuración del enrutador.</li>
<li>En la <em>línea 8</em>: Cada acción en una clase controlador prefijada con <tt class="docutils literal"><span class="pre">Action</span></tt> y referida en la configuración de enrutado por el nombre de la acción (<tt class="docutils literal"><span class="pre">index</span></tt>).
En la siguiente sección, crearás una ruta que asigna un URI a esta acción.
Aprenderás cómo los marcadores de posición de la ruta (<tt class="docutils literal"><span class="pre">{nombre}</span></tt>) se convierten en argumentos para el método de acción (<tt class="docutils literal"><span class="pre">$nombre</span></tt>).</li>
<li>En la <em>línea 10</em>: el controlador crea y devuelve un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>.</li>
</ul>
</div>
<div class="section" id="asignando-una-uri-a-un-controlador">
<span id="index-3"></span><h2>Asignando una URI a un controlador<a class="headerlink" href="#asignando-una-uri-a-un-controlador" title="Permalink to this headline">¶</a></h2>
<p>El nuevo controlador devuelve una página HTML simple. Para realmente ver esta página en tu navegador, necesitas crear una ruta, la cual corresponda a un patrón de URL específico para el controlador:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">hola</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">/hola/{nombre}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>     <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHolaBundle</span><span class="p-Indicator">:</span><span class="nv">Hola</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;hola&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/hola/{nombre}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHolaBundle:Hola:index<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// app/config/routing.php</span>
<span class="x">$coleccion-&gt;add(&#39;hola&#39;, new Route(&#39;/hola/{nombre}&#39;, array(</span>
<span class="x">    &#39;_controller&#39; =&gt; &#39;AcmeHolaBundle:Hola:index&#39;,</span>
<span class="x">)));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Yendo ahora a <tt class="docutils literal"><span class="pre">/hola/ryan</span></tt> se ejecuta el controlador <tt class="docutils literal"><span class="pre">HolaController</span></tt>::<tt class="docutils literal"><span class="pre">indexAction()</span></tt> y pasa <tt class="docutils literal"><span class="pre">ryan</span></tt> a la variable <tt class="docutils literal"><span class="pre">$nombre</span></tt>. Crear una &#8220;página&#8221; significa simplemente que debes crear un método controlador y una ruta asociada.</p>
<p>Observa la sintaxis utilizada para referirse al controlador: <tt class="docutils literal"><span class="pre">AcmeHolaBundle:Hola:index</span></tt>.
Symfony2 utiliza una flexible notación de cadena para referirse a diferentes controladores.
Esta es la sintaxis más común y le dice Symfony2 que busque una clase controlador llamada <tt class="docutils literal"><span class="pre">HolaController</span></tt> dentro de un paquete llamado <tt class="docutils literal"><span class="pre">AcmeHolaBundle</span></tt>. Entonces ejecuta el método <tt class="docutils literal"><span class="pre">indexAction()</span></tt>.</p>
<p>Para más detalles sobre el formato de cadena utilizado para referir a diferentes controladores, consulta el <a class="reference internal" href="routing.html#controller-string-syntax"><em>Patrón de nomenclatura para controladores</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Este ejemplo coloca la configuración de enrutado directamente en el directorio <tt class="docutils literal"><span class="pre">app/config/</span></tt>. Una mejor manera de organizar tus rutas es colocar cada ruta en el paquete al que pertenece. Para más información sobre este tema, consulta <a class="reference internal" href="routing.html#routing-include-external-resources"><em>Incluyendo recursos de enrutado externos</em></a>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Puedes aprender mucho más sobre el sistema de enrutado en el <a class="reference internal" href="routing.html"><em>capítulo de enrutado</em></a>.</p>
</div>
<div class="section" id="parametros-de-ruta-como-argumentos-para-el-controlador">
<span id="route-parameters-controller-arguments"></span><span id="index-4"></span><h3>Parámetros de ruta como argumentos para el controlador<a class="headerlink" href="#parametros-de-ruta-como-argumentos-para-el-controlador" title="Permalink to this headline">¶</a></h3>
<p>Ya sabes que el parámetro <tt class="docutils literal"><span class="pre">_controller</span></tt> en <tt class="docutils literal"><span class="pre">AcmeHolaBundle:Hola:index</span></tt> se refiere al método <tt class="docutils literal"><span class="pre">HolaController::indexAction()</span></tt> que vive dentro del paquete <tt class="docutils literal"><span class="pre">AcmeHolaBundle</span></tt>. Lo más interesante de esto son los argumentos que se pasan a este método:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// src/Acme/HolaBundle/Controller/HolaController.php</span>

<span class="k">namespace</span> <span class="nx">Acme\HolaBundle\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HolaController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>El controlador tiene un solo argumento, <tt class="docutils literal"><span class="pre">$nombre</span></tt>, el cual corresponde al parámetro <tt class="docutils literal"><span class="pre">{nombre}</span></tt> de la ruta coincidente (<tt class="docutils literal"><span class="pre">ryan</span></tt> en nuestro ejemplo). De hecho, cuando ejecutas tu controlador, Symfony2 empareja cada argumento del controlador con un parámetro de la ruta coincidente. Tomemos el siguiente ejemplo:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">hola</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">/hola/{nombre_de_pila}/{apellido}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span>     <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHolaBundle</span><span class="p-Indicator">:</span><span class="nv">Hola</span><span class="p-Indicator">:</span><span class="nv">index</span><span class="p-Indicator">,</span> <span class="nv">color</span><span class="p-Indicator">:</span> <span class="nv">verde</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;hola&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/hola/{nombre_de_pila}/{apellido}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHolaBundle:Hola:index<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;color&quot;</span><span class="nt">&gt;</span>verde<span class="nt">&lt;/default&gt;</span>
<span class="nt">&lt;/route&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// app/config/routing.php</span>
<span class="x">$coleccion-&gt;add(&#39;hola&#39;, new Route(&#39;/hola/{nombre_de_pila}/{apellido}&#39;, array(</span>
<span class="x">    &#39;_controller&#39; =&gt; &#39;AcmeHolaBundle:Hola:index&#39;,</span>
<span class="x">    &#39;color&#39;       =&gt; &#39;verde&#39;,</span>
<span class="x">)));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>El controlador para esto puede tomar varios argumentos:</p>
<div class="highlight-python"><pre>public function indexAction($nombre_de_pila, $apellido, $color)
{
    // ...
}</pre>
</div>
<p>Ten en cuenta que ambas variables marcadoras de posición (<tt class="docutils literal"><span class="pre">{nombre_de_pila}</span></tt>, <tt class="docutils literal"><span class="pre">{apellido}</span></tt>) así como la variable predeterminada <tt class="docutils literal"><span class="pre">color</span></tt> están disponibles como argumentos en el controlador. Cuando una ruta corresponde, las variables marcadoras de posición se combinan con <tt class="docutils literal"><span class="pre">defaults</span></tt> para hacer que una matriz esté disponible para tu controlador.</p>
<p>Asignar parámetros de ruta a los argumentos del controlador es fácil y flexible. Ten muy en cuenta las siguientes pautas mientras desarrollas.</p>
<ul>
<li><p class="first"><strong>El orden de los argumentos del controlador no tiene importancia</strong></p>
<blockquote>
<div><p>Symfony2 es capaz de igualar los nombres de los parámetros de la ruta con los nombres de las variables en la firma del método controlador. En otras palabras, se da cuenta de que el parámetro <tt class="docutils literal"><span class="pre">{apellido}</span></tt> coincide con el argumento <tt class="docutils literal"><span class="pre">$apellido</span></tt>.
Los argumentos del controlador se pueden reorganizar completamente y aún así siguen funcionando perfectamente:</p>
<div class="highlight-python"><pre>public function indexAction($apellido, $color, $nombre_de_pila)
{
    // ..
}</pre>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Cada argumento requerido del controlador debe coincidir con un parámetro de enrutado</strong></p>
<blockquote>
<div><p>Lo siguiente lanzará una <tt class="docutils literal"><span class="pre">RuntimeException</span></tt> porque no hay ningún parámetro <tt class="docutils literal"><span class="pre">foo</span></tt> definido en la ruta:</p>
<div class="highlight-python"><pre>public function indexAction($nombre_de_pila, $apellido, $color, $foo)
{
    // ..
}</pre>
</div>
<p>Sin embargo, hacer que el argumento sea opcional, está perfectamente bien. El siguiente ejemplo no lanzará una excepción:</p>
<div class="highlight-python"><pre>public function indexAction($nombre_de_pila, $apellido, $color, $foo = 'bar')
{
    // ..
}</pre>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>No todos los parámetros de enrutado deben ser argumentos en tu controlador</strong></p>
<blockquote>
<div><p>Si, por ejemplo, <tt class="docutils literal"><span class="pre">apellido</span></tt> no es tan importante para tu controlador, lo puedes omitir por completo:</p>
<div class="highlight-python"><pre>public function indexAction($nombre_de_pila, $color)
{
    // ..
}</pre>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Además, todas las rutas tienen un parámetro especial <tt class="docutils literal"><span class="pre">_route</span></tt>, el cual es igual al nombre de la ruta con la que fue emparejado (por ejemplo, <tt class="docutils literal"><span class="pre">hola</span></tt>). Aunque no suele ser útil, igualmente está disponible como un argumento del controlador.</p>
</div>
</div>
<div class="section" id="la-peticion-como-argumento-para-el-controlador">
<h3>La <tt class="docutils literal"><span class="pre">Petición</span></tt> como argumento para el controlador<a class="headerlink" href="#la-peticion-como-argumento-para-el-controlador" title="Permalink to this headline">¶</a></h3>
<p>Para mayor comodidad, también puedes hacer que Symfony pase el objeto <tt class="docutils literal"><span class="pre">Petición</span></tt> como un argumento a tu controlador. Esto especialmente es conveniente cuando trabajas con formularios, por ejemplo:</p>
<div class="highlight-python"><pre>use Symfony\Component\HttpFoundation\Request;

public function updateAction(Request $peticion)
{
    $formulario = $this-&gt;createForm(...);

    $formulario-&gt;bindRequest($peticion);
    // ...
}</pre>
</div>
</div>
</div>
<div class="section" id="la-clase-base-del-controlador">
<span id="index-5"></span><h2>La clase base del controlador<a class="headerlink" href="#la-clase-base-del-controlador" title="Permalink to this headline">¶</a></h2>
<p>Para mayor comodidad, Symfony2 viene con una clase base <tt class="docutils literal"><span class="pre">Controller</span></tt> que te ayuda en algunas de las tareas más comunes del controlador y proporciona acceso a cualquier recurso que tu clase controlador pueda necesitar. Al extender esta clase <tt class="docutils literal"><span class="pre">Controller</span></tt>, puedes tomar ventaja de varios métodos ayudantes.</p>
<p>Agrega la instrucción <tt class="docutils literal"><span class="pre">use</span></tt> en lo alto de la clase <tt class="docutils literal"><span class="pre">Controller</span></tt> y luego modifica <tt class="docutils literal"><span class="pre">HolaController</span></tt> para extenderla:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/HolaBundle/Controller/HolaController.php</span>

<span class="x">namespace Acme\HolaBundle\Controller;</span>
<span class="x">use Symfony\Bundle\FrameworkBundle\Controller\Controller;</span>
<span class="x">use Symfony\Component\HttpFoundation\Response;</span>

<span class="x">class HolaController extends Controller</span>
<span class="x">{</span>
<span class="x">    public function indexAction($nombre)</span>
<span class="x">    {</span>
<span class="x">      return new Response(&#39;&lt;html&gt;&lt;body&gt;Hola &#39;.$nombre.&#39;!&lt;/body&gt;&lt;/html&gt;&#39;);</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Esto, en realidad no cambia nada acerca de cómo funciona el controlador. En la siguiente sección, aprenderás acerca de los métodos ayudantes que la clase base del controlador pone a tu disposición. Estos métodos sólo son atajos para utilizar la funcionalidad del núcleo de Symfony2 que está a nuestra disposición, usando o no la clase base <tt class="docutils literal"><span class="pre">Controller</span></tt>. Una buena manera de ver la funcionalidad del núcleo en acción es buscar en la misma clase <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\Controller\Controller</span></tt>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Extender la clase base es <em>opcional</em> en Symfony; esta contiene útiles atajos, pero no es obligatorio. También puedes extender la clase <tt class="docutils literal"><span class="pre">Symfony\Component\DependencyInjection\ContainerAware`</span></tt>. El objeto contenedor del servicio será accesible a través de la propiedad <tt class="docutils literal"><span class="pre">container</span></tt>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Puedes definir tus <a class="reference internal" href="../cookbook/controller/service.html"><em>Controladores como Servicios</em></a>.</p>
</div>
</div>
<div class="section" id="tareas-comunes-del-controlador">
<span id="index-6"></span><h2>Tareas comunes del controlador<a class="headerlink" href="#tareas-comunes-del-controlador" title="Permalink to this headline">¶</a></h2>
<p>A pesar de que un controlador puede hacer prácticamente cualquier cosa, la mayoría de los controladores se encargarán de las mismas tareas básicas una y otra vez. Estas tareas, tal como redirigir, procesar plantillas y acceder a servicios básicos, son muy fáciles de manejar en Symfony2.</p>
<div class="section" id="redirigiendo">
<span id="index-7"></span><h3>Redirigiendo<a class="headerlink" href="#redirigiendo" title="Permalink to this headline">¶</a></h3>
<p>Si deseas redirigir al usuario a otra página, utiliza el método <tt class="docutils literal"><span class="pre">redirect()</span></tt>:</p>
<div class="highlight-python"><pre>public function indexAction()
{
    return $this-&gt;redirect($this-&gt;generateUrl('portada'));
}</pre>
</div>
<p>El método <tt class="docutils literal"><span class="pre">generateUrl()</span></tt> es sólo una función auxiliar que genera la URL de una determinada ruta. Para más información, consulta el capítulo <a class="reference internal" href="routing.html"><em>Enrutando</em></a>.</p>
<p>Por omisión, el método <tt class="docutils literal"><span class="pre">redirect()</span></tt> produce una redirección 302 (temporal). Para realizar una redirección 301 (permanente), modifica el segundo argumento:</p>
<div class="highlight-python"><pre>public function indexAction()
{
    return $this-&gt;redirect($this-&gt;generateUrl('portada'), 301);
}</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>El método <tt class="docutils literal"><span class="pre">redirect()</span></tt> simplemente es un atajo que crea un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> que se especializa en redirigir a los usuarios. Es equivalente a:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="x">use Symfony\Component\HttpFoundation\RedirectResponse;</span>

<span class="x">return new RedirectResponse($this-&gt;generateUrl(&#39;portada&#39;));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reenviando">
<span id="index-8"></span><h3>Reenviando<a class="headerlink" href="#reenviando" title="Permalink to this headline">¶</a></h3>
<p>También, fácilmente puedes redirigir internamente hacia a otro controlador con el método <tt class="docutils literal"><span class="pre">forward()</span></tt>. En lugar de redirigir el navegador del usuario, este hace una subpetición interna, y pide el controlador especificado. El método <tt class="docutils literal"><span class="pre">forward()</span></tt> devuelve el objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>, el cual es devuelto desde el controlador:</p>
<div class="highlight-python"><pre>public function indexAction($nombre)
{
    $respuesta = $this-&gt;forward('AcmeHolaBundle:Hola:maravillosa', array(
        'nombre'  =&gt; $nombre,
        'color' =&gt; 'verde'
    ));

    // alguna modificación adicional a la respuesta o la devuelve directamente

    return $respuesta;
}</pre>
</div>
<p>Ten en cuenta que el método <tt class="docutils literal"><span class="pre">forward()</span></tt> utiliza la misma representación de cadena del controlador utilizada en la configuración de enrutado. En este caso, la clase controlador de destino será <tt class="docutils literal"><span class="pre">HolaController</span></tt> dentro de algún <tt class="docutils literal"><span class="pre">AcmeHolaBundle</span></tt>.
La matriz pasada al método convierte los argumentos en el controlador resultante.
Esta misma interfaz se utiliza al incrustar controladores en las plantillas (consulta <a class="reference internal" href="templating.html#templating-embedding-controller"><em>Incrustando controladores</em></a>). El método del controlador destino debe tener un aspecto como el siguiente:</p>
<div class="highlight-python"><pre>public function maravillosaAction($nombre, $color)
{
    // ... crea y devuelve un objeto Response
}</pre>
</div>
<p>Y al igual que al crear un controlador para una ruta, el orden de los argumentos para <tt class="docutils literal"><span class="pre">maravillosaAction</span></tt> no tiene la menor importancia. Symfony2 empareja las claves nombre con el índice (por ejemplo, <tt class="docutils literal"><span class="pre">nombre</span></tt>) con el argumento del método (por ejemplo, <tt class="docutils literal"><span class="pre">$nombre</span></tt>). Si cambias el orden de los argumentos, Symfony2 todavía pasará el valor correcto a cada variable.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Al igual que otros métodos del <tt class="docutils literal"><span class="pre">Controller</span></tt> base, el método <tt class="docutils literal"><span class="pre">forward</span></tt> sólo es un atajo para la funcionalidad del núcleo de Symfony2. Puedes redirigir directamente por medio del servicio <tt class="docutils literal"><span class="pre">http_kernel</span></tt>. Un método <tt class="docutils literal"><span class="pre">forward</span></tt> devuelve un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>:</p>
<div class="last highlight-python"><pre>$httpKernel = $this-&gt;container-&gt;get('http_kernel');
$respuesta = $httpKernel-&gt;forward('AcmeHolaBundle:Hola:maravillosa', array(
    'nombre'  =&gt; $nombre,
    'color' =&gt; 'verde',
));</pre>
</div>
</div>
</div>
<div class="section" id="procesando-plantillas">
<span id="controlador-procesando-plantillas"></span><span id="index-9"></span><h3>Procesando plantillas<a class="headerlink" href="#procesando-plantillas" title="Permalink to this headline">¶</a></h3>
<p>Aunque no es un requisito, la mayoría de los controladores en última instancia, reproducen una plantilla que es responsable de generar el código HTML (u otro formato) para el controlador.
El método <tt class="docutils literal"><span class="pre">renderView()</span></tt> procesa una plantilla y devuelve su contenido. Puedes usar el contenido de la plantilla para crear un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>:</p>
<div class="highlight-python"><pre>$contenido = $this-&gt;renderView('AcmeHolaBundle:Hola:index.html.twig', array('nombre' =&gt; $nombre));

return new Response($contenido);</pre>
</div>
<p>Incluso puedes hacerlo en un solo paso con el método <tt class="docutils literal"><span class="pre">render()</span></tt>, el cual devuelve un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> con el contenido de la plantilla:</p>
<div class="highlight-python"><pre>return $this-&gt;render('AcmeHolaBundle:Hola:index.html.twig', array('nombre' =&gt; $nombre));</pre>
</div>
<p>En ambos casos, se reproducirá la plantilla <tt class="docutils literal"><span class="pre">Resources/views/Hola/index.html.twig</span></tt> dentro del <tt class="docutils literal"><span class="pre">AcmeHolaBundle</span></tt>.</p>
<p>El motor de plantillas de Symfony se explica con gran detalle en el capítulo <a class="reference internal" href="templating.html"><em>Plantillas</em></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>El método <tt class="docutils literal"><span class="pre">renderView</span></tt> es un atajo para usar el servicio de <tt class="docutils literal"><span class="pre">plantillas</span></tt>. El servicio de <tt class="docutils literal"><span class="pre">plantillas</span></tt> también se puede utilizar directamente:</p>
<div class="last highlight-python"><pre>$plantilla = $this-&gt;get('templating');
$contenido = $plantilla-&gt;render('AcmeHolaBundle:Hola:index.html.twig', array('nombre' =&gt; $nombre));</pre>
</div>
</div>
</div>
<div class="section" id="accediendo-a-otros-servicios">
<span id="index-10"></span><h3>Accediendo a otros servicios<a class="headerlink" href="#accediendo-a-otros-servicios" title="Permalink to this headline">¶</a></h3>
<p>Al extender la clase base del controlador, puedes acceder a cualquier servicio de Symfony2 a través del método <tt class="docutils literal"><span class="pre">get()</span></tt>. Aquí hay varios servicios comunes que puedes necesitar:</p>
<div class="highlight-python"><pre>$peticion = $this-&gt;getRequest();

$respuesta = $this-&gt;get('response');

$plantilla = $this-&gt;get('templating');

$enrutador = $this-&gt;get('router');

$cartero = $this-&gt;get('mailer');</pre>
</div>
<p>Hay un sinnúmero de servicios disponibles y te animamos a definir tus propios servicios. Para listar todos los servicios disponibles, utiliza la orden <tt class="docutils literal"><span class="pre">container:debug</span></tt> de la consola:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console container:debug
</pre></div>
</div>
<p>Para más información, consulta el capítulo <a class="reference internal" href="service_container.html"><em>Contenedor de servicios</em></a>.</p>
</div>
</div>
<div class="section" id="gestionando-errores-y-paginas-404">
<span id="index-11"></span><h2>Gestionando errores y páginas 404<a class="headerlink" href="#gestionando-errores-y-paginas-404" title="Permalink to this headline">¶</a></h2>
<p>Cuando no se encuentra algo, debes jugar bien con el protocolo HTTP y devolver una respuesta 404. Para ello, debes lanzar un tipo de excepción especial.
Si estás extendiendo la clase base del controlador, haz lo siguiente:</p>
<div class="highlight-python"><pre>public function indexAction()
{
    $producto = // recupera el objeto desde la base de datos
    if (!$producto) {
        throw $this-&gt;createNotFoundException('El producto no existe');
    }

    return $this-&gt;render(...);
}</pre>
</div>
<p>El método <tt class="docutils literal"><span class="pre">createNotFoundException()</span></tt> crea un objeto <tt class="docutils literal"><span class="pre">NotFoundHttpException</span></tt> especial, que en última instancia, desencadena una respuesta HTTP 404 en el interior de Symfony.</p>
<p>Por supuesto, estás en libertad de lanzar cualquier clase de <tt class="docutils literal"><span class="pre">Excepción</span></tt> en tu controlador - Symfony2 automáticamente devolverá una respuesta HTTP con código 500.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">throw new \Exception(&#39;¡Algo salió mal!&#39;);</span>
</pre></div>
</div>
<p>En todos los casos, se muestra al usuario final una página de error estilizada y a los desarrolladores se les muestra una página de error de depuración completa (cuando se visualiza la página en modo de depuración).
Puedes personalizar ambas páginas de error. Para más detalles, lee &#8220;<a class="reference internal" href="../cookbook/controller/error_pages.html"><em>Cómo personalizar páginas de error</em></a>&#8221; en el recetario.</p>
</div>
<div class="section" id="gestionando-la-sesion">
<span id="index-12"></span><h2>Gestionando la sesión<a class="headerlink" href="#gestionando-la-sesion" title="Permalink to this headline">¶</a></h2>
<p>Symfony2 proporciona un agradable objeto sesión que puedes utilizar para almacenar información sobre el usuario (ya sea una persona real usando un navegador, un robot o un servicio web) entre las peticiones. De manera predeterminada, Symfony2 almacena los atributos de una <tt class="docutils literal"><span class="pre">cookie</span></tt> usando las sesiones nativas de PHP.</p>
<p>Almacenar y recuperar información de la sesión se puede conseguir fácilmente desde cualquier controlador:</p>
<div class="highlight-python"><pre>$sesion = $this-&gt;getRequest()-&gt;getSession();

// guarda un atributo para reutilizarlo durante una posterior petición del usuario
$sesion-&gt;set('foo', 'bar');

// en otro controlador por otra petición
$foo = $sesion-&gt;get('foo');

// fija la configuración regional del usuario
$sesion-&gt;setLocale('es');</pre>
</div>
<p>Estos atributos se mantendrán en el usuario por el resto de la sesión de ese usuario.</p>
<div class="section" id="mensajes-flash">
<span id="index-13"></span><h3>Mensajes flash<a class="headerlink" href="#mensajes-flash" title="Permalink to this headline">¶</a></h3>
<p>También puedes almacenar pequeños mensajes que se pueden guardar en la sesión del usuario para exactamente una petición adicional. Esto es útil cuando procesas un formulario: deseas redirigir y proporcionar un mensaje especial que aparezca en la <em>siguiente</em> petición.
Este tipo de mensajes se conocen como mensajes &#8220;flash&#8221;.</p>
<p>Por ejemplo, imagina que estás procesando el envío de un formulario:</p>
<div class="highlight-python"><pre>public function updateAction()
{
    $formulario = $this-&gt;createForm(...);

    $formulario-&gt;bindRequest($this-&gt;getRequest());
    if ($formulario-&gt;isValid()) {
        // hace algún tipo de procesamiento

        $this-&gt;get('session')-&gt;setFlash('aviso', '¡Tus cambios se han guardado!');

        return $this-&gt;redirect($this-&gt;generateUrl(...));
    }

    return $this-&gt;render(...);
}</pre>
</div>
<p>Después de procesar la petición, el controlador establece un mensaje flash <tt class="docutils literal"><span class="pre">aviso</span></tt> y luego redirige al usuario. El nombre (<tt class="docutils literal"><span class="pre">aviso</span></tt>) no es significativo - es lo que estás usando para identificar el tipo del mensaje.</p>
<p>En la siguiente acción de la plantilla, podrías utilizar el siguiente código para reproducir el mensaje de <tt class="docutils literal"><span class="pre">aviso</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">app.session.hasFlash</span><span class="o">(</span><span class="s1">&#39;aviso&#39;</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;flash-aviso&quot;</span><span class="nt">&gt;</span>
        <span class="cp">{{</span> <span class="nv">app.session.flash</span><span class="o">(</span><span class="s1">&#39;aviso&#39;</span><span class="o">)</span> <span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">hasFlash</span><span class="p">(</span><span class="s1">&#39;aviso&#39;</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;div class=&quot;flash-aviso&quot;&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;session&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getFlash</span><span class="p">(</span><span class="s1">&#39;aviso&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/div&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Por diseño, los mensajes flash están destinados a vivir por exactamente una petición (estos &#8220;desaparecen en un flash&#8221;). Están diseñados para utilizarlos a través de redirecciones exactamente como lo hemos hecho en este ejemplo.</p>
</div>
</div>
<div class="section" id="el-objeto-response">
<span id="index-14"></span><h2>El objeto <tt class="docutils literal"><span class="pre">Response</span></tt><a class="headerlink" href="#el-objeto-response" title="Permalink to this headline">¶</a></h2>
<p>El único requisito para un controlador es que devuelva un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>. La clase <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\Response</span></tt> es una abstracción PHP en torno a la respuesta HTTP - el mensaje de texto, relleno con cabeceras HTTP y el contenido que se envía de vuelta al cliente:</p>
<div class="highlight-python"><pre>// crea una simple respuesta con un código de estado 200 (el predeterminado)
$respuesta = new Response('Hola '.$nombre, 200);

// crea una respuesta JSON con un código de estado 200
$respuesta = new Response(json_encode(array('nombre' =&gt; $nombre)));
$respuesta-&gt;headers-&gt;set('Content-Type', 'application/json');</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">La propiedad <tt class="docutils literal"><span class="pre">headers</span></tt> es un objeto <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Component\HttpFoundation\HeaderBag</span></tt> con varios métodos útiles para lectura y mutación de las cabeceras del objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>. Los nombres de las cabeceras están normalizados para que puedas usar <tt class="docutils literal"><span class="pre">Content-Type</span></tt> y este sea equivalente a <tt class="docutils literal"><span class="pre">content-type</span></tt>, e incluso a <tt class="docutils literal"><span class="pre">content_type</span></tt>.</p>
</div>
</div>
<div class="section" id="el-objeto-request">
<span id="index-15"></span><h2>El objeto <tt class="docutils literal"><span class="pre">Request</span></tt><a class="headerlink" href="#el-objeto-request" title="Permalink to this headline">¶</a></h2>
<p>Además de los valores de los marcadores de posición de enrutado, el controlador también tiene acceso al objeto <tt class="docutils literal"><span class="pre">Petición</span></tt> al extender la clase base <tt class="docutils literal"><span class="pre">Controlador</span></tt>:</p>
<div class="highlight-python"><pre>$peticion = $this-&gt;getRequest();

$peticion-&gt;isXmlHttpRequest(); // ¿es una petición Ajax?

$peticion-&gt;getPreferredLanguage(array('en', 'es'));

$peticion-&gt;query-&gt;get('pag'); // consigue un parámetro $_GET

$peticion-&gt;request-&gt;get('pag'); // consigue un parámetro $_POST</pre>
</div>
<p>Al igual que el objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>, las cabeceras de la petición se almacenan en un objeto <tt class="docutils literal"><span class="pre">HeaderBag</span></tt> y son fácilmente accesibles.</p>
</div>
<div class="section" id="consideraciones-finales">
<h2>Consideraciones finales<a class="headerlink" href="#consideraciones-finales" title="Permalink to this headline">¶</a></h2>
<p>Siempre que creas una página, en última instancia, tendrás que escribir algún código que contenga la lógica para esa página. En Symfony, a esto se le llama <em>controlador</em>, y es una función PHP que puede hacer lo que necesitas a fin de devolver el objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> que se entrega al usuario final.</p>
<p>Para facilitarte la vida, puedes optar por extender la clase base <tt class="docutils literal"><span class="pre">Controller</span></tt>, la cual contiene atajos a métodos para muchas tareas de control comunes. Por ejemplo, puesto que no deseas poner el código HTML en tu controlador, puedes usar el método <tt class="docutils literal"><span class="pre">render()</span></tt> para reproducir y devolver el contenido de una plantilla.</p>
<p>En otros capítulos, veremos cómo puedes usar el controlador para conservar y recuperar objetos desde una base de datos, procesar formularios presentados, manejar el almacenamiento en caché y mucho más.</p>
</div>
<div class="section" id="aprende-mas-en-el-recetario">
<h2>Aprende más en el recetario<a class="headerlink" href="#aprende-mas-en-el-recetario" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../cookbook/controller/error_pages.html"><em>Cómo personalizar páginas de error</em></a></li>
<li><a class="reference internal" href="../cookbook/controller/service.html"><em>Cómo definir controladores como servicios</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Controlador</a><ul>
<li><a class="reference internal" href="#ciclo-de-vida-de-la-peticion-controlador-respuesta">Ciclo de vida de la petición, controlador, respuesta</a></li>
<li><a class="reference internal" href="#un-controlador-sencillo">Un controlador sencillo</a></li>
<li><a class="reference internal" href="#asignando-una-uri-a-un-controlador">Asignando una URI a un controlador</a><ul>
<li><a class="reference internal" href="#parametros-de-ruta-como-argumentos-para-el-controlador">Parámetros de ruta como argumentos para el controlador</a></li>
<li><a class="reference internal" href="#la-peticion-como-argumento-para-el-controlador">La <tt class="docutils literal"><span class="pre">Petición</span></tt> como argumento para el controlador</a></li>
</ul>
</li>
<li><a class="reference internal" href="#la-clase-base-del-controlador">La clase base del controlador</a></li>
<li><a class="reference internal" href="#tareas-comunes-del-controlador">Tareas comunes del controlador</a><ul>
<li><a class="reference internal" href="#redirigiendo">Redirigiendo</a></li>
<li><a class="reference internal" href="#reenviando">Reenviando</a></li>
<li><a class="reference internal" href="#procesando-plantillas">Procesando plantillas</a></li>
<li><a class="reference internal" href="#accediendo-a-otros-servicios">Accediendo a otros servicios</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gestionando-errores-y-paginas-404">Gestionando errores y páginas 404</a></li>
<li><a class="reference internal" href="#gestionando-la-sesion">Gestionando la sesión</a><ul>
<li><a class="reference internal" href="#mensajes-flash">Mensajes flash</a></li>
</ul>
</li>
<li><a class="reference internal" href="#el-objeto-response">El objeto <tt class="docutils literal"><span class="pre">Response</span></tt></a></li>
<li><a class="reference internal" href="#el-objeto-request">El objeto <tt class="docutils literal"><span class="pre">Request</span></tt></a></li>
<li><a class="reference internal" href="#consideraciones-finales">Consideraciones finales</a></li>
<li><a class="reference internal" href="#aprende-mas-en-el-recetario">Aprende más en el recetario</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="page_creation.html"
                        title="previous chapter">Creando páginas en Symfony2</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="routing.html"
                        title="next chapter">Enrutando</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/book/controller.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="routing.html" title="Enrutando"
             >next</a> |</li>
        <li class="right" >
          <a href="page_creation.html" title="Creando páginas en Symfony2"
             >previous</a> |</li>
        <li><a href="../index.html">symfony-docs-es v1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Libro</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Osukaru.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>