

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Cómo trabajar con correos electrónicos durante el desarrollo &mdash; symfony-docs-es v1 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="symfony-docs-es v1 documentation" href="../../index.html" />
    <link rel="up" title="Recetario" href="../index.html" />
    <link rel="next" title="Cómo organizar el envío de correo electrónico" href="spool.html" />
    <link rel="prev" title="Cómo utilizar Gmail para enviar mensajes de correo electrónico" href="../gmail.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="spool.html" title="Cómo organizar el envío de correo electrónico"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../gmail.html" title="Cómo utilizar Gmail para enviar mensajes de correo electrónico"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">symfony-docs-es v1 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Recetario</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="como-trabajar-con-correos-electronicos-durante-el-desarrollo">
<h1>Cómo trabajar con correos electrónicos durante el desarrollo<a class="headerlink" href="#como-trabajar-con-correos-electronicos-durante-el-desarrollo" title="Permalink to this headline">¶</a></h1>
<p>Cuando estás creando una aplicación que envía mensajes de correo electrónico, a menudo, mientras desarrollas, no quieres enviar realmente los correos electrónicos al destinatario especificado. Si estás utilizando el <tt class="docutils literal"><span class="pre">SwiftmailerBundle</span></tt> con Symfony2, puedes lograr fácilmente esto a través de ajustes de configuración sin tener que realizar ningún cambio en el código de tu aplicación en absoluto. Hay dos opciones principales cuando se trata del manejo de correos electrónicos durante el desarrollo: (a) desactivar el envío de correos electrónicos por completo o (b) enviar todos los mensajes de correo electrónico a una dirección especificada.</p>
<div class="section" id="desactivando-el-envio">
<h2>Desactivando el envío<a class="headerlink" href="#desactivando-el-envio" title="Permalink to this headline">¶</a></h2>
<p>Puedes desactivar el envío de correos electrónicos estableciendo la opción <tt class="docutils literal"><span class="pre">disable_delivery</span></tt> a <tt class="docutils literal"><span class="pre">true</span></tt>. Este es el predeterminado en el entorno <tt class="docutils literal"><span class="pre">test</span></tt> de la distribución estándar. Si haces esto en la configuración específica <tt class="docutils literal"><span class="pre">test</span></tt>, los mensajes de correo electrónico no se enviarán cuando se ejecutan pruebas, pero se seguirán enviando en los entornos <tt class="docutils literal"><span class="pre">prod</span></tt> y <tt class="docutils literal"><span class="pre">dev</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config_test.yml</span>
<span class="l-Scalar-Plain">swiftmailer</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">disable_delivery</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config_test.xml --&gt;</span>

<span class="c">&lt;!--</span>
<span class="c">xmlns:swiftmailer=&quot;http://symfony.com/schema/dic/swiftmailer&quot;</span>
<span class="c">http://symfony.com/schema/dic/swiftmailer http://symfony.com/schema/dic/swiftmailer/swiftmailer-1.0.xsd</span>
<span class="c">--&gt;</span>

<span class="nt">&lt;swiftmailer:config</span>
    <span class="na">disable-delivery=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// app/config/config_test.php</span>
<span class="x">$contenedor-&gt;loadFromExtension(&#39;swiftmailer&#39;, array(</span>
<span class="x">    &#39;disable_delivery&#39;  =&gt; &quot;true&quot;,</span>
<span class="x">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Si también deseas inhabilitar el envío en el entorno <tt class="docutils literal"><span class="pre">dev</span></tt>, sólo tienes que añadir esta configuración en el archivo <tt class="docutils literal"><span class="pre">config_dev.yml</span></tt>.</p>
</div>
<div class="section" id="enviando-a-una-direccion-especifica">
<h2>Enviando a una dirección específica<a class="headerlink" href="#enviando-a-una-direccion-especifica" title="Permalink to this headline">¶</a></h2>
<p>También puedes optar por que todos los correos sean enviados a una dirección específica, en vez de la dirección real especificada cuando se envía el mensaje. Esto se puede hacer a través de la opción <tt class="docutils literal"><span class="pre">delivery_domicilio</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config_dev.yml</span>
<span class="l-Scalar-Plain">swiftmailer</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">delivery_domicilio</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">dev@ejemplo.com</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config_dev.xml --&gt;</span>

<span class="c">&lt;!--</span>
<span class="c">xmlns:swiftmailer=&quot;http://symfony.com/schema/dic/swiftmailer&quot;</span>
<span class="c">http://symfony.com/schema/dic/swiftmailer http://symfony.com/schema/dic/swiftmailer/swiftmailer-1.0.xsd</span>
<span class="c">--&gt;</span>

<span class="nt">&lt;swiftmailer:config</span>
    <span class="na">delivery-domicilio=</span><span class="s">&quot;dev@ejemplo.com&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// app/config/config_dev.php</span>
<span class="x">$contenedor-&gt;loadFromExtension(&#39;swiftmailer&#39;, array(</span>
<span class="x">    &#39;delivery_domicilio&#39;  =&gt; &quot;dev@ejemplo.com&quot;,</span>
<span class="x">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Ahora, supongamos que estás enviando un correo electrónico a <tt class="docutils literal"><span class="pre">recipiente&#64;ejemplo.com</span></tt>.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">public function indexAction($nombre)</span>
<span class="x">{</span>
<span class="x">    $mensaje = \Swift_Message::newInstance()</span>
<span class="x">        -&gt;setSubject(&#39;Hola correo-e&#39;)</span>
<span class="x">        -&gt;setFrom(&#39;send@ejemplo.com&#39;)</span>
<span class="x">        -&gt;setTo(&#39;recipient@ejemplo.com&#39;)</span>
<span class="x">        -&gt;setCuerpo($this-&gt;renderView(&#39;HolaBundle:Hola:email.txt.twig&#39;, array(&#39;nombre&#39; =&gt; $nombre)))</span>
<span class="x">    ;</span>
<span class="x">    $this-&gt;get(&#39;mailer&#39;)-&gt;send($mensaje);</span>

<span class="x">    return $this-&gt;render(...);</span>
<span class="x">}</span>
</pre></div>
</div>
<p>En el entorno <tt class="docutils literal"><span class="pre">dev</span></tt>, el correo electrónico será enviado a <tt class="docutils literal"><span class="pre">dev&#64;ejemplo.com</span></tt>.
<tt class="docutils literal"><span class="pre">SwiftMailer</span></tt> añadirá un encabezado adicional para el correo electrónico, <tt class="docutils literal"><span class="pre">X-Swift-To</span></tt> conteniendo la dirección reemplazada, por lo tanto todavía serás capaz de ver que se habría enviado.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Además de las direcciones <tt class="docutils literal"><span class="pre">para</span></tt>, también se detendrá el correo electrónico que se envíe a cualquier dirección <tt class="docutils literal"><span class="pre">CC</span></tt> y <tt class="docutils literal"><span class="pre">BCC</span></tt> establecida. <tt class="docutils literal"><span class="pre">SwiftMailer</span></tt> agregará encabezados adicionales al correo electrónico con las direcciones reemplazada en ellos.
Estas son <tt class="docutils literal"><span class="pre">X-Swift-CC</span></tt> y <tt class="docutils literal"><span class="pre">X-Swift-CCO</span></tt> para las direcciones <tt class="docutils literal"><span class="pre">CC</span></tt> y <tt class="docutils literal"><span class="pre">BCC</span></tt>, respectivamente.</p>
</div>
</div>
<div class="section" id="visualizando-desde-la-barra-de-depuracion-web">
<h2>Visualizando desde la barra de depuración web<a class="headerlink" href="#visualizando-desde-la-barra-de-depuracion-web" title="Permalink to this headline">¶</a></h2>
<p>Puedes ver cualquier correo electrónico enviado por una página cuando estás en el entorno <tt class="docutils literal"><span class="pre">dev</span></tt> usando la barra de depuración web. El icono de correo electrónico en la barra de herramientas mostrará cuántos correos electrónicos fueron enviados. Si haces clic en él, se abrirá un informe mostrando los detalles de los mensajes de correo electrónico.</p>
<p>Si estás enviando un correo electrónico e inmediatamente después lo desvías, tendrás que establecer la opción <tt class="docutils literal"><span class="pre">intercept_redirects</span></tt> a <tt class="docutils literal"><span class="pre">true</span></tt> en el archivo <tt class="docutils literal"><span class="pre">config_dev.yml</span></tt> para que puedas ver el correo electrónico en la barra de depuración antes de que sea redirigido.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Cómo trabajar con correos electrónicos durante el desarrollo</a><ul>
<li><a class="reference internal" href="#desactivando-el-envio">Desactivando el envío</a></li>
<li><a class="reference internal" href="#enviando-a-una-direccion-especifica">Enviando a una dirección específica</a></li>
<li><a class="reference internal" href="#visualizando-desde-la-barra-de-depuracion-web">Visualizando desde la barra de depuración web</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../gmail.html"
                        title="previous chapter">Cómo utilizar Gmail para enviar mensajes de correo electrónico</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="spool.html"
                        title="next chapter">Cómo organizar el envío de correo electrónico</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/cookbook/email/dev_environment.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="spool.html" title="Cómo organizar el envío de correo electrónico"
             >next</a> |</li>
        <li class="right" >
          <a href="../gmail.html" title="Cómo utilizar Gmail para enviar mensajes de correo electrónico"
             >previous</a> |</li>
        <li><a href="../../index.html">symfony-docs-es v1 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Recetario</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Osukaru.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>